<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Quest - Learn Python Through Adventure!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
</head>
<body>
    <!-- Particle Canvas for Effects -->
    <canvas id="particleCanvas"></canvas>
    
    <!-- Main Container -->
    <div class="container" id="app">
        
        <!-- Welcome Screen -->
        <div class="screen active" id="welcomeScreen">
            <div class="hero-section">
                <h1 class="game-title glitch" data-text="PYTHON QUEST">PYTHON QUEST</h1>
                <p class="subtitle">Learn Python Through Epic Adventures!</p>
                <div class="feature-badges">
                    <span class="badge">üéÆ 30+ Missions</span>
                    <span class="badge">‚ö° Real Code</span>
                    <span class="badge">üèÜ Level Up</span>
                    <span class="badge">üéØ Free Forever</span>
                </div>
            </div>
            
            <div class="menu-card">
                <div class="profile-select">
                    <h2>Choose Your Path</h2>
                    <div id="profileList"></div>
                    <button class="btn btn-primary pulse" onclick="showCreateProfile()">
                        ‚öîÔ∏è Create New Hero
                    </button>
                </div>
            </div>
        </div>

        <!-- Create Profile Screen -->
        <div class="screen" id="createProfileScreen">
            <div class="menu-card">
                <h2>üéØ Create Your Hero</h2>
                <div class="form-group">
                    <label>Hero Name</label>
                    <input type="text" id="heroName" placeholder="Enter your hero name" maxlength="20">
                </div>
                <div class="form-group">
                    <label>Choose Your Difficulty</label>
                    <div class="difficulty-select">
                        <button class="difficulty-btn" data-difficulty="easy" onclick="selectDifficulty('easy')">
                            <span class="difficulty-icon">üü¢</span>
                            <span class="difficulty-name">Easy</span>
                            <span class="difficulty-desc">Guided tutorials</span>
                        </button>
                        <button class="difficulty-btn" data-difficulty="medium" onclick="selectDifficulty('medium')">
                            <span class="difficulty-icon">üü°</span>
                            <span class="difficulty-name">Medium</span>
                            <span class="difficulty-desc">Standard challenges</span>
                        </button>
                        <button class="difficulty-btn" data-difficulty="hard" onclick="selectDifficulty('hard')">
                            <span class="difficulty-icon">üî¥</span>
                            <span class="difficulty-name">Hard</span>
                            <span class="difficulty-desc">Expert mode</span>
                        </button>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="createProfile()">Start Adventure</button>
                <button class="btn btn-secondary" onclick="showScreen('welcomeScreen')">Back</button>
            </div>
        </div>

        <!-- Main Game Screen -->
        <div class="screen" id="gameScreen">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="player-info">
                    <div class="player-name" id="playerName">Hero</div>
                    <div class="player-stats">
                        <div class="stat">
                            <span class="stat-icon">‚≠ê</span>
                            <span class="stat-value" id="playerLevel">1</span>
                        </div>
                        <div class="stat">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="missionsCompleted">0</span>
                        </div>
                    </div>
                </div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xpBar" style="width: 0%"></div>
                    <span class="xp-text" id="xpText">0 / 100 XP</span>
                </div>
                <button class="btn btn-small" onclick="showMenu()">Menu</button>
            </div>

            <!-- Mission Screen -->
            <div class="game-content" id="missionContent">
                <div class="mission-card">
                    <div class="mission-header">
                        <h2 id="missionTitle">Mission Title</h2>
                        <div class="mission-meta">
                            <span class="badge" id="missionTopic">Topic</span>
                            <span class="badge" id="missionDifficulty">Easy</span>
                            <span class="badge" id="attemptCounter">Attempt #1</span>
                        </div>
                    </div>
                    
                    <div class="mission-story" id="missionStory">
                        Mission story goes here...
                    </div>
                    
                    <div class="mission-description" id="missionDescription">
                        Mission description goes here...
                    </div>
                    
                    <div class="hint-section">
                        <button class="btn btn-hint" onclick="showHint()">üí° Show Hint</button>
                        <button class="btn btn-hint" onclick="showExtraHint()">üí°üí° Show Extra Hint</button>
                        <div class="hint-box hidden" id="hintBox"></div>
                        <div class="hint-box hidden" id="extraHintBox"></div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-header">
                            <h3>‚úçÔ∏è Your Solution</h3>
                            <button class="btn btn-small" onclick="clearCode()">Clear</button>
                        </div>
                        <textarea id="codeEditor" placeholder="# Write your Python code here...
# Press 'Run Code' when ready!"></textarea>
                        <div class="code-actions">
                            <button class="btn btn-primary btn-large" onclick="runCode()">
                                üöÄ Run Code
                            </button>
                            <button class="btn btn-secondary" onclick="skipMission()">
                                ‚è≠Ô∏è Skip Mission
                            </button>
                        </div>
                    </div>
                    
                    <div class="output-section hidden" id="outputSection">
                        <h3>Output</h3>
                        <pre id="output"></pre>
                    </div>
                </div>
            </div>

            <!-- Menu Overlay -->
            <div class="menu-overlay hidden" id="menuOverlay">
                <div class="menu-card">
                    <h2>Menu</h2>
                    <button class="btn btn-primary" onclick="showTopics()">üìö Select Topic</button>
                    <button class="btn btn-primary" onclick="showProgress()">üìä View Progress</button>
                    <button class="btn btn-primary" onclick="changeDifficulty()">üéØ Change Difficulty</button>
                    <button class="btn btn-secondary" onclick="closeMenu()">Continue Mission</button>
                    <button class="btn btn-danger" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>

        <!-- Topics Selection Screen -->
        <div class="screen" id="topicsScreen">
            <div class="menu-card">
                <h2>üìö Select Topic</h2>
                <div class="topics-grid" id="topicsList">
                    <!-- Topics will be populated by JS -->
                </div>
                <button class="btn btn-secondary" onclick="returnToGame()">Back</button>
            </div>
        </div>

        <!-- Progress Screen -->
        <div class="screen" id="progressScreen">
            <div class="menu-card">
                <h2>üìä Your Progress</h2>
                <div id="progressDetails"></div>
                <button class="btn btn-secondary" onclick="returnToGame()">Back</button>
            </div>
        </div>

    </div>

    <!-- Success Modal -->
    <div class="modal hidden" id="successModal">
        <div class="modal-content success">
            <div class="success-animation">
                <div class="trophy-icon">üèÜ</div>
                <h2>MISSION COMPLETE!</h2>
            </div>
            <div class="success-details">
                <p class="success-message" id="successMessage"></p>
                <div class="xp-gain" id="xpGain"></div>
                <div class="achievement-badges" id="achievementBadges"></div>
            </div>
            <button class="btn btn-primary btn-large pulse" onclick="nextMission()">
                Next Mission ‚ûî
            </button>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div class="modal hidden" id="levelUpModal">
        <div class="modal-content levelup">
            <div class="levelup-animation">
                <div class="level-icon">‚≠ê</div>
                <h2>LEVEL UP!</h2>
            </div>
            <div class="level-details">
                <p class="level-text">You are now Level <span id="newLevel"></span>!</p>
                <p class="level-subtext">Your Python powers grow stronger!</p>
            </div>
            <button class="btn btn-primary" onclick="closeLevelUp()">Awesome!</button>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal hidden" id="errorModal">
        <div class="modal-content error">
            <h2>‚ùå Not Quite Right</h2>
            <p class="error-message" id="errorMessage"></p>
            <div class="error-details" id="errorDetails"></div>
            <div class="encouragement">
                <p>üí™ Don't give up! You can try again!</p>
                <p>üéØ Unlimited retries available!</p>
            </div>
            <button class="btn btn-primary btn-large" onclick="closeError()">
                Try Again
            </button>
            <button class="btn btn-secondary" onclick="giveUpMission()">
                Give Up (for now)
            </button>
        </div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Loading Python Engine...</p>
    </div>

    <!-- Scripts -->
    <script src="missions.js"></script>
    <script src="app.js"></script>
</body>
</html>
